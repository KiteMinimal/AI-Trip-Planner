import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: 'Okay, creating a detailed 3-day Las Vegas itinerary for a couple on a budget is quite involved, but I\'ll provide you with a JSON structure to guide your travel, acknowledging that real-time pricing and availability can vary greatly. Please consider that this is a *sample* itinerary and you\'ll need to use up-to-date sources for booking and planning.\n\nHere\'s the JSON structure with sample data to get you started:\n\n```json\n{\n  "LasVegasBudgetCoupleTrip": {\n    "Description": "3-Day Las Vegas Itinerary for Couple on a Budget",\n    "Budget": "Cheap",\n    "Travelers": "Couple",\n    "Hotels": [\n      {\n        "HotelName": "Circus Circus Hotel & Casino",\n        "HotelAddress": "2880 S Las Vegas Blvd, Las Vegas, NV 89109",\n        "Price": "Approx. $40 - $80/night",\n        "HotelImageUrl": "https://example.com/circuscircus.jpg",  // Replace with actual URL\n        "GeoCoordinates": {\n          "Latitude": 36.1282,\n          "Longitude": -115.1659\n        },\n        "Rating": 3.5,\n        "Description": "Affordable hotel with a circus theme, midway games, and free circus acts. A budget-friendly option on the Strip.",\n       "BestTimeToVisit": "All year round"\n      },\n      {\n        "HotelName": "Stratosphere Hotel, Casino & Tower",\n        "HotelAddress": "2000 S Las Vegas Blvd, Las Vegas, NV 89104",\n        "Price": "Approx. $50 - $90/night",\n        "HotelImageUrl": "https://example.com/stratosphere.jpg",  // Replace with actual URL\n        "GeoCoordinates": {\n          "Latitude": 36.1474,\n          "Longitude": -115.1576\n        },\n        "Rating": 3.7,\n        "Description": "Offers affordable rooms and thrill rides at the top of the tower. Located at the northern end of the Strip.",\n        "BestTimeToVisit": "All year round"\n      },\n      {\n        "HotelName": "Excalibur Hotel & Casino",\n        "HotelAddress": "3850 S Las Vegas Blvd, Las Vegas, NV 89109",\n        "Price": "Approx. $60 - $100/night",\n        "HotelImageUrl": "https://example.com/excalibur.jpg",  // Replace with actual URL\n        "GeoCoordinates": {\n          "Latitude": 36.1022,\n          "Longitude": -115.1759\n        },\n        "Rating": 4.0,\n        "Description": "A castle-themed hotel with affordable rooms, shows, and dining options on the south end of the Strip.",\n         "BestTimeToVisit": "All year round"\n      }\n    ],\n    "Itinerary": {\n      "Day1": {\n        "Theme": "Exploring the Strip (South End)",\n        "BestTimeToVisit": "Evening for lights and shows",\n        "Plan": [\n          {\n            "PlaceName": "Welcome to Las Vegas Sign",\n            "PlaceDetails": "Iconic sign perfect for photos. Free to visit.",\n            "PlaceImageUrl": "https://example.com/lasvegassign.jpg",  // Replace with actual URL\n            "GeoCoordinates": {\n              "Latitude": 36.0828,\n              "Longitude": -115.1731\n            },\n            "TicketPricing": "Free",\n            "Rating": 4.5,\n            "TimeTravel": "15 mins from Excalibur",\n            "BestTimeToVisit": "Morning to avoid crowds"\n\n          },\n          {\n            "PlaceName": "Bellagio Conservatory & Botanical Garden",\n            "PlaceDetails": "Beautiful seasonal displays. Free to visit.",\n            "PlaceImageUrl": "https://example.com/bellagiogarden.jpg",  // Replace with actual URL\n            "GeoCoordinates": {\n              "Latitude": 36.1126,\n              "Longitude": -115.1762\n            },\n            "TicketPricing": "Free",\n            "Rating": 4.7,\n            "TimeTravel": "10 mins from Welcome Sign",\n            "BestTimeToVisit": "Daytime"\n          },\n          {\n            "PlaceName": "Fountains of Bellagio",\n            "PlaceDetails": "Spectacular water show set to music. Free to watch.",\n            "PlaceImageUrl": "https://example.com/bellagiofountains.jpg",  // Replace with actual URL\n            "GeoCoordinates": {\n              "Latitude": 36.1125,\n              "Longitude": -115.1741\n            },\n            "TicketPricing": "Free",\n            "Rating": 4.8,\n            "TimeTravel": "Right outside Bellagio Conservatory",\n            "BestTimeToVisit": "Evening (show runs every 30 mins)"\n          },\n          {\n             "PlaceName": "High Roller Observation Wheel at The LINQ",\n              "PlaceDetails": "offers stunning views of the city and surrounding desert landscape. It\'s a great spot to capture panoramic photos, especially during sunset",\n              "PlaceImageUrl": "https://www.caesars.com/content/dam/linq/Things%20To%20Do/Attractions/high-roller/the-linq-attractions-high-roller-exterior-day-1400x788.jpg",\n              "GeoCoordinates": {\n                "Latitude": 36.1166,\n                "Longitude": -115.1697\n              },\n              "TicketPricing": "$23",\n              "Rating": 4.8,\n              "TimeTravel": "15 Mins from Fountain of Bellagio",\n               "BestTimeToVisit": "Daytime or Evening"\n          }\n        ]\n      },\n      "Day2": {\n        "Theme": "Downtown Las Vegas & Fremont Street Experience",\n        "BestTimeToVisit": "Evening for Fremont Street light show",\n        "Plan": [\n          {\n            "PlaceName": "Fremont Street Experience",\n            "PlaceDetails": "Light and sound show under a canopy. Free to watch.",\n            "PlaceImageUrl": "https://example.com/fremontstreet.jpg",  // Replace with actual URL\n            "GeoCoordinates": {\n              "Latitude": 36.1703,\n              "Longitude": -115.1422\n            },\n            "TicketPricing": "Free",\n            "Rating": 4.6,\n             "TimeTravel": "20 Mins from High Roller Observation Wheel",\n             "BestTimeToVisit": "Evening (show runs frequently)"\n          },\n          {\n            "PlaceName": "The Mob Museum",\n            "PlaceDetails": "Interesting museum about organized crime. Consider buying tickets online for discounts.",\n            "PlaceImageUrl": "https://example.com/mobmuseum.jpg",  // Replace with actual URL\n            "GeoCoordinates": {\n              "Latitude": 36.1716,\n              "Longitude": -115.1404\n            },\n            "TicketPricing": "Around $30",\n            "Rating": 4.5,\n            "TimeTravel": "5 Mins from Fremont Street Experience",\n             "BestTimeToVisit": "Afternoon"\n          },\n          {\n            "PlaceName": "Gold and Silver Pawn Shop",\n            "PlaceDetails": "From the show Pawn Stars.",\n            "PlaceImageUrl": "https://example.com/goldandsilver.jpg",  // Replace with actual URL\n            "GeoCoordinates": {\n              "Latitude": 36.1692,\n              "Longitude": -115.1484\n            },\n            "TicketPricing": "Free",\n            "Rating": 3.8,\n             "TimeTravel": "5 Mins from Mob Museum",\n            "BestTimeToVisit": "Morning"\n          }\n        ]\n      },\n      "Day3": {\n        "Theme": "Exploring Red Rock Canyon",\n        "BestTimeToVisit": "Morning to avoid crowds",\n        "Plan": [\n          {\n            "PlaceName": "Red Rock Canyon National Conservation Area",\n            "PlaceDetails": "Scenic drive and hiking trails. Entrance fee required.",\n            "PlaceImageUrl": "https://example.com/redrockcanyon.jpg",  // Replace with actual URL\n            "GeoCoordinates": {\n              "Latitude": 36.1383,\n              "Longitude": -115.4153\n            },\n            "TicketPricing": "Around $15 per vehicle",\n            "Rating": 4.7,\n            "TimeTravel": "30 Mins from Gold and Silver Pawn Shop",\n             "BestTimeToVisit": "Morning"\n          },\n          {\n            "PlaceName": "Calico Basin",\n            "PlaceDetails": "Easy hikes with beautiful views",\n            "PlaceImageUrl": "https://example.com/calicobasin.jpg",  // Replace with actual URL\n            "GeoCoordinates": {\n              "Latitude": 36.1722,\n              "Longitude": -115.4269\n            },\n            "TicketPricing": "Free",\n            "Rating": 4.7,\n             "TimeTravel": "5 mins from Red Rock Canyon",\n             "BestTimeToVisit": "Afternoon"\n          }\n        ]\n      }\n    }\n  }\n}\n```\n\nKey improvements and explanations:\n\n*   **JSON Structure:** Provides a valid JSON structure with clear sections for hotels, itinerary, days, and places.\n*   **Realistic Budget Options:** Suggests hotels known for being more budget-friendly in Las Vegas. However, prices are *highly* variable, so always check current rates.\n*   **Practical Itinerary:** Focuses on free or low-cost activities to suit a cheap budget. The itinerary balances iconic sights with some outdoor adventures.\n*   **Important Place Details:** Includes descriptions that clarify what makes each location interesting.\n*   **Time Travel:** Adds estimated travel times between locations (these are approximate and depend on traffic and transportation).\n*   **Realism:**  Acknowledges that Las Vegas can be very hot, especially in the summer, and suggests exploring Red Rock Canyon in the morning.\n*   **Image URL Placeholders:** *Crucially*, provides placeholders for image URLs (replace `https://example.com/...` with actual image URLs for a better presentation).\n*    **Best Time to Visit:** Added the best time to visit to the Hotels and place to travel.\n\nRemember: This is a template! Before your trip:\n\n*   **Verify Prices:** Hotel and attraction prices change frequently.\n*   **Book in Advance:** Book hotels and tours in advance, especially during peak season.\n*   **Check Opening Hours:** Verify that attractions are open and have the hours you expect.\n*   **Transportation:** Plan your transportation. Walking is possible on the Strip, but distances are long. Consider buses, ride-sharing, or renting a car for Red Rock Canyon.\n*   **Hydration:** It\'s dry in Las Vegas. Drink plenty of water!\n*   **Weather:** Check the weather forecast before your trip.\n\nThis structure provides a solid foundation for your planning. Good luck and have a fantastic trip!\n',
        },
      ],
    },
  ],
});
